/**
 * Section Layout
 *
 * Section for large page sections
 * Inspired by Every Layout
 *
 * Pattern: Base class applies variables, modifiers only SET variables.
 * This follows the cluster/stack pattern for consistency.
 */

@layer layouts {
  :root {
    --vertical-margin: var(--line-2);
    --horizontal-margin: var(--line-075);
  }

  /*
   * Media query equivalents for :root
   * These mirror the container queries below so that fixed-position elements
   * (like dev tool overlays) can inherit responsive margin values.
   *
   * ⚠️  KEEP IN SYNC: When updating container query breakpoints below,
   *     also update these media queries to match.
   *     See also: src/css/prototyping.css (margin mode selectors)
   */
  @media (min-width: 30rem) {
    :root {
      --horizontal-margin: var(--line-2);
    }
  }
  @media (min-width: 60rem) {
    :root {
      --horizontal-margin: var(--line-3);
    }
  }
  @media (min-width: 70rem) {
    :root {
      --horizontal-margin: calc((100% / 14) + var(--line-1));
    }
  }
  @media (min-width: 90rem) {
    :root {
      --horizontal-margin: calc((100% / 9) + var(--line-1));
    }
  }

  /*
   * Base class
   * Uses CSS custom properties that modifiers can override.
   * Separate variables for each edge allow granular control.
   *
   * By default, sections only have bottom padding. This keeps same-colored
   * sections closer together. Sections with scheme classes get top padding
   * automatically to create visual separation at color transitions.
   */
  .section {
    --section-top: 0;
    --section-bottom: var(--vertical-margin);
    --section-margins: var(--horizontal-margin);

    container-type: inline-size;
    container-name: section;
    width: 100%;
    padding-block-start: var(--section-top);
    padding-block-end: var(--section-bottom);
    padding-inline: var(--section-margins);
  }

  /*
   * Scheme-based padding rules
   *
   * Sections with scheme classes get top padding automatically to create
   * visual separation at color transitions. Uses :where() to keep specificity
   * low, allowing modifiers like .section-top-tight to always override.
   *
   * For same-scheme adjacents that should be closer together,
   * use .section-top-tight on the second section.
   */

  /* Scheme sections get top padding (creates full "boxed" effect) */
  .section:where([class*="scheme-"]) {
    --section-top: var(--vertical-margin);
  }

  /* Non-scheme section following a scheme section gets top padding */
  :where(.section[class*="scheme-"]) + .section:where(:not([class*="scheme-"])) {
    --section-top: var(--vertical-margin);
  }

  /*
   * Modifiers - ONLY set variables, never direct properties
   */

  /* Explicit top + bottom padding (overrides default bottom-only) */
  .section-spaced {
    --section-top: var(--vertical-margin);
    --section-bottom: var(--vertical-margin);
  }

  /* Remove all padding */
  .section-full-bleed {
    --section-top: 0;
    --section-bottom: 0;
    --section-margins: 0;
  }

  /* Narrower horizontal padding (wider content) */
  .section-wide {
    --section-margins: var(--line-1);
  }

  /* Snug vertical padding (smaller top + bottom) */
  .section-snug {
    --section-top: var(--line-1);
    --section-bottom: var(--line-1);
  }

  /* Remove vertical padding */
  .section-tight {
    --section-top: 0;
    --section-bottom: 0;
  }

  /* Remove top padding only */
  .section-top-tight {
    --section-top: 0;
  }

  /* Remove bottom padding only */
  .section-bottom-tight {
    --section-bottom: 0;
  }

  /*
   * Container query responsive adjustments
   *
   * Requires an ancestor with containment (e.g., .main or body).
   * Use .container on parent elements to enable these queries.
   */
  @container (min-width: 30rem) {
    .section {
      --vertical-margin: var(--line-2);
      --horizontal-margin: var(--line-2);
    }
    .section-wide {
      --section-margins: var(--line-1);
    }
  }

  @container (min-width: 60rem) {
    .section {
      --vertical-margin: var(--line-3);
      --horizontal-margin: var(--line-3);
    }
    .section-wide {
      --section-margins: var(--line-15);
    }
  }

  @container (min-width: 70rem) {
    .section {
      --horizontal-margin: calc((100% / 14) + var(--line-1));
    }
    .section-wide {
      --section-margins: var(--line-2);
    }
  }

  @container (min-width: 90rem) {
    .section {
      --horizontal-margin: calc((100% / 9) + var(--line-1));
    }
    .section-wide {
      --section-margins: var(--line-3);
    }
  }
}
