/**
 * Section Layout
 *
 * Section for large page sections
 * Inspired by Every Layout
 *
 * Pattern: Base class applies variables, modifiers only SET variables.
 * This follows the cluster/stack pattern for consistency.
 */

@layer layouts {
  :root {
    --vertical-margin: var(--line-2);
    --horizontal-margin: var(--line-075);
  }

  /*
   * Media query equivalents for :root
   * These mirror the container queries below so that fixed-position elements
   * (like dev tool overlays) can inherit responsive margin values.
   *
   * ⚠️  KEEP IN SYNC: When updating container query breakpoints below,
   *     also update these media queries to match.
   *     See also: src/css/prototyping.css (margin mode selectors)
   */
  @media (min-width: 30rem) {
    :root {
      --horizontal-margin: var(--line-2);
    }
  }
  @media (min-width: 60rem) {
    :root {
      --horizontal-margin: var(--line-3);
    }
  }
  @media (min-width: 70rem) {
    :root {
      --horizontal-margin: calc((100% / 14) + var(--line-1));
    }
  }
  @media (min-width: 90rem) {
    :root {
      --horizontal-margin: calc((100% / 9) + var(--line-1));
    }
  }

  /*
   * Base class
   * Uses CSS custom properties that modifiers can override.
   * Separate variables for each edge allow granular control.
   */
  .section {
    --section-padding-block-start: var(--vertical-margin);
    --section-padding-block-end: var(--vertical-margin);
    --section-padding-inline: var(--horizontal-margin);

    container-type: inline-size;
    container-name: section;
    width: 100%;
    padding-block-start: var(--section-padding-block-start);
    padding-block-end: var(--section-padding-block-end);
    padding-inline: var(--section-padding-inline);
  }

  /*
   * Modifiers - ONLY set variables, never direct properties
   */

  /* Remove all padding */
  .section-full-bleed {
    --section-padding-block-start: 0;
    --section-padding-block-end: 0;
    --section-padding-inline: 0;
  }

  /* Narrower horizontal padding (wider content) */
  .section-wide {
    --section-padding-inline: var(--line-1);
  }

  /* Snug vertical padding */
  .section-v-snug {
    --section-padding-block-start: var(--line-1);
    --section-padding-block-end: var(--line-1);
  }

  /* Remove vertical padding */
  .section-tight {
    --section-padding-block-start: 0;
    --section-padding-block-end: 0;
  }

  /* Remove top padding only */
  .section-top-tight {
    --section-padding-block-start: 0;
  }

  /* Remove bottom padding only */
  .section-bottom-tight {
    --section-padding-block-end: 0;
  }

  /*
   * Container query responsive adjustments
   *
   * Requires an ancestor with containment (e.g., .main or body).
   * Use .container on parent elements to enable these queries.
   */
  @container (min-width: 30rem) {
    .section {
      --vertical-margin: var(--line-2);
      --horizontal-margin: var(--line-2);
    }
    .section-wide {
      --section-padding-inline: var(--line-1);
    }
  }

  @container (min-width: 60rem) {
    .section {
      --vertical-margin: var(--line-3);
      --horizontal-margin: var(--line-3);
    }
    .section-wide {
      --section-padding-inline: var(--line-15);
    }
  }

  @container (min-width: 70rem) {
    .section {
      --horizontal-margin: calc((100% / 14) + var(--line-1));
    }
    .section-wide {
      --section-padding-inline: var(--line-2);
    }
  }

  @container (min-width: 90rem) {
    .section {
      --horizontal-margin: calc((100% / 9) + var(--line-1));
    }
    .section-wide {
      --section-padding-inline: var(--line-3);
    }
  }
}
