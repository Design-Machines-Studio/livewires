/**
 * Development & Prototyping Utilities
 *
 * These utilities are for design and development only.
 * Remove this file in production builds.
 */

 @layer base {
  :root {
    --font-flow-block: 'Flow Block', sans-serif;
 }
}

@layer utilities {
  /* Development Grids - Visual guides for baseline and columns */

  /* Baseline Grid - Shows horizontal lines at each baseline increment */

  .show-baseline {
    /* Control subdivisions with --subdivisions (1 = no subdivisions, 2 = halves, 4 = quarters, etc.) */
    --subdivisions: 2;
    --baseline-transparency: 0.92; /* Make bg- classes slightly transparent to see grid */

    /* Main baseline grid at full line-height intervals */
    --baseline-grid: repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent calc(var(--line) - 1px),
      color-mix(in srgb, var(--color-fg) 25%, transparent) calc(var(--line) - 1px),
      color-mix(in srgb, var(--color-fg) 25%, transparent) var(--line)
    );

    /* Subdivision grid (lighter lines) - calculated based on --subdivisions */
    --subdivision-grid: repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent calc(var(--line) / var(--subdivisions) - 1px),
      color-mix(in srgb, var(--color-fg) 12%, transparent) calc(var(--line) / var(--subdivisions) - 1px),
      color-mix(in srgb, var(--color-fg) 12%, transparent) calc(var(--line) / var(--subdivisions))
    );

    /* Apply grid to body/root element */
    background-image: var(--baseline-grid), var(--subdivision-grid);
    background-size: 100% var(--line), 100% calc(var(--line) / var(--subdivisions));
    background-position: 0 0;
  }

  /* Make bg- classes slightly transparent so grid shows through */
  .show-baseline :is([class*="bg-"]):not(.bg-transparent) {
    background-color: color-mix(
      in srgb,
      var(--bg-color) var(--baseline-transparency),
      transparent
    ) !important;
  }

  /* Column Grid - Shows vertical guides that match .grid-columns-* layouts */
  /* These create vertical lines at column boundaries with proper gap spacing */

  .show-columns-2::before,
  .show-columns-3::before,
  .show-columns-4::before,
  .show-columns-6::before,
  .show-columns-12::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
  }

  /* 2 columns: 1 divider */
  .show-columns-2::before {
    background: linear-gradient(
      to right,
      transparent calc(50% - var(--grid-gap, var(--gutter)) / 2),
      color-mix(in srgb, var(--color-fg) 30%, transparent) calc(50% - var(--grid-gap, var(--gutter)) / 2),
      color-mix(in srgb, var(--color-fg) 30%, transparent) calc(50% + var(--grid-gap, var(--gutter)) / 2),
      transparent calc(50% + var(--grid-gap, var(--gutter)) / 2)
    );
  }

  /* 3 columns: 2 dividers */
  .show-columns-3::before {
    background:
      linear-gradient(
        to right,
        transparent calc(33.333% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(33.333% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(33.333% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(33.333% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(66.666% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(66.666% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(66.666% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(66.666% + var(--grid-gap, var(--gutter)) / 2)
      );
  }

  /* 4 columns: 3 dividers */
  .show-columns-4::before {
    background:
      linear-gradient(
        to right,
        transparent calc(25% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(25% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(25% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(25% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(50% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(50% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(50% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(50% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(75% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(75% - var(--grid-gap, var(--gutter)) / 2),
        color-mix(in srgb, var(--color-fg) 30%, transparent) calc(75% + var(--grid-gap, var(--gutter)) / 2),
        transparent calc(75% + var(--grid-gap, var(--gutter)) / 2)
      );
  }

  /* 6 columns: 5 dividers */
  .show-columns-6::before {
    background: repeating-linear-gradient(
      to right,
      transparent 0,
      transparent calc((100% / 6) - var(--grid-gap, var(--gutter)) / 2),
      color-mix(in srgb, var(--color-fg) 30%, transparent) calc((100% / 6) - var(--grid-gap, var(--gutter)) / 2),
      color-mix(in srgb, var(--color-fg) 30%, transparent) calc((100% / 6) + var(--grid-gap, var(--gutter)) / 2),
      transparent calc((100% / 6) + var(--grid-gap, var(--gutter)) / 2),
      transparent calc(100% / 6 * 2)
    );
    background-size: calc(100% / 6) 100%;
  }

  /* 12 columns: 11 dividers */
  .show-columns-12::before {
    background: repeating-linear-gradient(
      to right,
      transparent 0,
      transparent calc((100% / 12) - var(--grid-gap, var(--gutter)) / 2),
      color-mix(in srgb, var(--color-fg) 30%, transparent) calc((100% / 12) - var(--grid-gap, var(--gutter)) / 2),
      color-mix(in srgb, var(--color-fg) 30%, transparent) calc((100% / 12) + var(--grid-gap, var(--gutter)) / 2),
      transparent calc((100% / 12) + var(--grid-gap, var(--gutter)) / 2),
      transparent calc(100% / 12 * 2)
    );
    background-size: calc(100% / 12) 100%;
  }

  /*
   * PROTOTYPING FONTS
   * Special fonts for design and prototyping
   */
  .redact .prose,
  .redact .content {
    font-family: var(--font-flow-block);
  }

  /*
   * DARK MODE
   * Manual dark mode toggle for prototyping
   */
  .dark-mode {
    --color-bg: var(--color-grey-900);
    --color-fg: var(--color-white);
    --color-subtle: var(--color-grey-800);
    --color-border: var(--color-grey-700);
    --color-muted: var(--color-grey-400);
    background-color: var(--color-bg);
    color: var(--color-fg);
  }
}
