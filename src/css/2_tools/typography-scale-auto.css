/**
 * Typography Scale - Ratio Mode Computed Values
 *
 * This file contains all the calculated values for ratio-based typography.
 * User-configurable settings are in 1_tokens/typography-scale-ratio.css
 *
 * DO NOT EDIT THIS FILE unless you're modifying the calculation logic.
 * To customize typography, edit the token values in the tokens file.
 *
 * FUTURE CSS @FUNCTION MIGRATION:
 * When CSS @function has wider browser support, this repetitive clamp pattern
 * can be replaced with a single function definition:
 *
 * @function --fluid-scale(--min, --max) {
 *   result: clamp(
 *     calc(var(--min) / 16 * 1rem),
 *     calc(var(--min) / 16 * 1rem + (var(--max) - var(--min)) * var(--type-scale-rate) / 16),
 *     calc(var(--max) / 16 * 1rem)
 *   );
 * }
 *
 * Then each size becomes: --text-lg: --fluid-scale(var(--size-lg-min), var(--size-lg-max));
 * See: https://caniuse.com/?search=%40function
 */

@layer tokens {
  :root {
    /* ===============================================
       PRE-CALCULATED RATIO POWERS
       Calculate once, use many times for performance
       =============================================== */

    --ratio-2: calc(var(--type-scale-ratio) * var(--type-scale-ratio));
    --ratio-3: calc(var(--ratio-2) * var(--type-scale-ratio));
    --ratio-4: calc(var(--ratio-3) * var(--type-scale-ratio));
    --ratio-5: calc(var(--ratio-4) * var(--type-scale-ratio));
    --ratio-6: calc(var(--ratio-5) * var(--type-scale-ratio));
    --ratio-7: calc(var(--ratio-6) * var(--type-scale-ratio));
    --ratio-8: calc(var(--ratio-7) * var(--type-scale-ratio));
    --ratio-9: calc(var(--ratio-8) * var(--type-scale-ratio));
    --ratio-10: calc(var(--ratio-9) * var(--type-scale-ratio));

    /* ===============================================
       BASELINE TEXT SIZE CALCULATION
       =============================================== */

    --text-base: clamp(
      calc(var(--text-base-min) / 16 * 1rem),
      calc(var(--text-base-min) / 16 * 1rem + (var(--text-base-max) - var(--text-base-min)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) / 16 * 1rem)
    );

    /* ===============================================
       COMPUTED TYPE SCALE
       All sizes calculate from base × ratio
       =============================================== */

    /* xs: base ÷ ratio² */
    --text-xs: clamp(
      calc(var(--text-base-min) / var(--ratio-2) / 16 * 1rem),
      calc(var(--text-base-min) / var(--ratio-2) / 16 * 1rem +
           (var(--text-base-max) / var(--ratio-2) - var(--text-base-min) / var(--ratio-2)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) / var(--ratio-2) / 16 * 1rem)
    );

    /* sm: base ÷ ratio */
    --text-sm: clamp(
      calc(var(--text-base-min) / var(--type-scale-ratio) / 16 * 1rem),
      calc(var(--text-base-min) / var(--type-scale-ratio) / 16 * 1rem +
           (var(--text-base-max) / var(--type-scale-ratio) - var(--text-base-min) / var(--type-scale-ratio)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) / var(--type-scale-ratio) / 16 * 1rem)
    );

    /* base: already defined above */

    /* lg: base × ratio */
    --text-lg: clamp(
      calc(var(--text-base-min) * var(--type-scale-ratio) / 16 * 1rem),
      calc(var(--text-base-min) * var(--type-scale-ratio) / 16 * 1rem +
           (var(--text-base-max) * var(--type-scale-ratio) - var(--text-base-min) * var(--type-scale-ratio)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--type-scale-ratio) / 16 * 1rem)
    );

    /* xl: base × ratio² */
    --text-xl: clamp(
      calc(var(--text-base-min) * var(--ratio-2) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-2) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-2) - var(--text-base-min) * var(--ratio-2)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-2) / 16 * 1rem)
    );

    /* 2xl: base × ratio³ */
    --text-2xl: clamp(
      calc(var(--text-base-min) * var(--ratio-3) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-3) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-3) - var(--text-base-min) * var(--ratio-3)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-3) / 16 * 1rem)
    );

    /* 3xl: base × ratio⁴ */
    --text-3xl: clamp(
      calc(var(--text-base-min) * var(--ratio-4) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-4) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-4) - var(--text-base-min) * var(--ratio-4)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-4) / 16 * 1rem)
    );

    /* 4xl: base × ratio⁵ */
    --text-4xl: clamp(
      calc(var(--text-base-min) * var(--ratio-5) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-5) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-5) - var(--text-base-min) * var(--ratio-5)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-5) / 16 * 1rem)
    );

    /* 5xl: base × ratio⁶ */
    --text-5xl: clamp(
      calc(var(--text-base-min) * var(--ratio-6) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-6) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-6) - var(--text-base-min) * var(--ratio-6)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-6) / 16 * 1rem)
    );

    /* 6xl: base × ratio⁷ */
    --text-6xl: clamp(
      calc(var(--text-base-min) * var(--ratio-7) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-7) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-7) - var(--text-base-min) * var(--ratio-7)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-7) / 16 * 1rem)
    );

    /* 7xl: base × ratio⁸ */
    --text-7xl: clamp(
      calc(var(--text-base-min) * var(--ratio-8) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-8) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-8) - var(--text-base-min) * var(--ratio-8)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-8) / 16 * 1rem)
    );

    /* 8xl: base × ratio⁹ */
    --text-8xl: clamp(
      calc(var(--text-base-min) * var(--ratio-9) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-9) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-9) - var(--text-base-min) * var(--ratio-9)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-9) / 16 * 1rem)
    );

    /* 9xl: base × ratio¹⁰ */
    --text-9xl: clamp(
      calc(var(--text-base-min) * var(--ratio-10) / 16 * 1rem),
      calc(var(--text-base-min) * var(--ratio-10) / 16 * 1rem +
           (var(--text-base-max) * var(--ratio-10) - var(--text-base-min) * var(--ratio-10)) * var(--type-scale-rate) / 16),
      calc(var(--text-base-max) * var(--ratio-10) / 16 * 1rem)
    );
  }
}
